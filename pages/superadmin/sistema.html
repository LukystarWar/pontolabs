<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema - SuperAdmin - PontoLabs</title>
  <link rel="icon" href="/assets/icons/icon-192.png">
  <link rel="stylesheet" href="/assets/css/global.css">
  <link rel="stylesheet" href="/assets/css/superadmin.css">
</head>
<body>
  <div class="superadmin-layout">
    <header class="superadmin-header">
      <div class="logo">ğŸ” <strong>SuperAdmin</strong> PontoLabs</div>
      <div class="user-info">
        <span id="user-name">SuperAdmin</span>
        <button id="logout-btn" class="btn btn-secondary">Sair</button>
      </div>
    </header>

    <nav class="superadmin-nav">
      <ul>
        <li><a href="/pages/superadmin/dashboard.html">ğŸ“Š Dashboard</a></li>
        <li><a href="/pages/superadmin/empresas.html">ğŸ¢ Empresas</a></li>
        <li><a href="/pages/superadmin/usuarios.html">ğŸ‘¥ UsuÃ¡rios</a></li>
        <li><a href="/pages/superadmin/sistema.html" class="active">âš™ï¸ Sistema</a></li>
      </ul>
    </nav>

    <main class="superadmin-content">
      <div class="page-header">
        <h1>âš™ï¸ ConfiguraÃ§Ãµes do Sistema</h1>
        <p>InformaÃ§Ãµes e configuraÃ§Ãµes gerais do PontoLabs</p>
      </div>

      <!-- InformaÃ§Ãµes do Sistema -->
      <div class="section">
        <h2>ğŸ“‹ InformaÃ§Ãµes do Sistema</h2>
        <div class="info-grid">
          <div class="info-card">
            <div class="info-label">VersÃ£o</div>
            <div class="info-value">1.0.0</div>
          </div>
          <div class="info-card">
            <div class="info-label">Database</div>
            <div class="info-value" id="db-status">Supabase PostgreSQL</div>
          </div>
          <div class="info-card">
            <div class="info-label">Project URL</div>
            <div class="info-value" id="project-url" style="font-size: 0.85rem;">-</div>
          </div>
          <div class="info-card">
            <div class="info-label">Ambiente</div>
            <div class="info-value">ProduÃ§Ã£o</div>
          </div>
        </div>
      </div>

      <!-- EstatÃ­sticas do Banco -->
      <div class="section">
        <h2>ğŸ’¾ EstatÃ­sticas do Banco de Dados</h2>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">ğŸ¢</div>
            <div class="stat-info">
              <div class="stat-value" id="total-empresas-db">0</div>
              <div class="stat-label">Total Empresas</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ‘¥</div>
            <div class="stat-info">
              <div class="stat-value" id="total-usuarios-db">0</div>
              <div class="stat-label">Total UsuÃ¡rios</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ‘¨â€ğŸ’¼</div>
            <div class="stat-info">
              <div class="stat-value" id="total-funcionarios-db">0</div>
              <div class="stat-label">Total FuncionÃ¡rios</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ–¥ï¸</div>
            <div class="stat-info">
              <div class="stat-value" id="total-terminais-db">0</div>
              <div class="stat-label">Total Terminais</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">âœ…</div>
            <div class="stat-info">
              <div class="stat-value" id="total-pontos-db">0</div>
              <div class="stat-label">Total Registros</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">ğŸ“…</div>
            <div class="stat-info">
              <div class="stat-value" id="pontos-ultimos-7-dias">0</div>
              <div class="stat-label">Ãšltimos 7 Dias</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Guia RÃ¡pido -->
      <div class="section">
        <h2>ğŸ“– Guia RÃ¡pido de Uso</h2>
        <div class="guide-grid">
          <div class="guide-card">
            <h3>ğŸ¢ 1. Criar Empresa</h3>
            <ol>
              <li>Acesse "Empresas"</li>
              <li>Clique em "+ Nova Empresa"</li>
              <li>Preencha nome e plano</li>
              <li>Salve a empresa</li>
            </ol>
          </div>

          <div class="guide-card">
            <h3>ğŸ‘¨â€ğŸ’¼ 2. Criar Admin</h3>
            <ol>
              <li>Acesse o Supabase Dashboard</li>
              <li>VÃ¡ em Authentication > Users</li>
              <li>Clique "Add User"</li>
              <li>Preencha email e senha</li>
              <li>Marque "Auto Confirm User"</li>
              <li>Copie o UUID do usuÃ¡rio</li>
            </ol>
          </div>

          <div class="guide-card">
            <h3>ğŸ”— 3. Vincular Admin</h3>
            <ol>
              <li>Clique na empresa criada</li>
              <li>Na aba "UsuÃ¡rios"</li>
              <li>Clique "+ Adicionar UsuÃ¡rio"</li>
              <li>Cole o UUID e preencha dados</li>
              <li>Role: "admin"</li>
            </ol>
          </div>

          <div class="guide-card">
            <h3>âœ… 4. Pronto!</h3>
            <p>Agora o Admin pode:</p>
            <ul>
              <li>Criar funcionÃ¡rios</li>
              <li>Criar terminais</li>
              <li>Ver relatÃ³rios</li>
              <li>Gerenciar sua empresa</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Links Ãšteis -->
      <div class="section">
        <h2>ğŸ”— Links Ãšteis</h2>
        <div class="links-grid">
          <a href="https://supabase.com/dashboard" target="_blank" class="link-card">
            <div class="link-icon">ğŸ—„ï¸</div>
            <div class="link-info">
              <div class="link-title">Supabase Dashboard</div>
              <div class="link-desc">Gerenciar banco de dados</div>
            </div>
          </a>

          <a href="https://supabase.com/dashboard/project/_/auth/users" target="_blank" class="link-card">
            <div class="link-icon">ğŸ‘¥</div>
            <div class="link-info">
              <div class="link-title">UsuÃ¡rios Auth</div>
              <div class="link-desc">Criar novos usuÃ¡rios</div>
            </div>
          </a>

          <a href="https://supabase.com/dashboard/project/_/editor" target="_blank" class="link-card">
            <div class="link-icon">ğŸ“</div>
            <div class="link-info">
              <div class="link-title">SQL Editor</div>
              <div class="link-desc">Executar queries SQL</div>
            </div>
          </a>

          <a href="https://github.com/LukystarWar/pontolabs" target="_blank" class="link-card">
            <div class="link-icon">ğŸ”§</div>
            <div class="link-info">
              <div class="link-title">GitHub</div>
              <div class="link-desc">CÃ³digo fonte do projeto</div>
            </div>
          </a>
        </div>
      </div>

      <!-- Comandos SQL Ãšteis -->
      <div class="section">
        <h2>ğŸ’» Comandos SQL Ãšteis</h2>
        <div class="sql-commands">
          <div class="sql-card">
            <div class="sql-title">Ver todas as empresas</div>
            <code class="sql-code">SELECT * FROM empresas ORDER BY criado_em DESC;</code>
            <button onclick="copySQL(this)" class="btn btn-sm">Copiar</button>
          </div>

          <div class="sql-card">
            <div class="sql-title">Ver todos os usuÃ¡rios com empresas</div>
            <code class="sql-code">SELECT u.*, e.nome as empresa_nome
FROM usuarios u
LEFT JOIN empresas e ON e.id = u.empresa_id
ORDER BY u.criado_em DESC;</code>
            <button onclick="copySQL(this)" class="btn btn-sm">Copiar</button>
          </div>

          <div class="sql-card">
            <div class="sql-title">Contar registros por empresa</div>
            <code class="sql-code">SELECT e.nome,
  COUNT(DISTINCT u.id) as usuarios,
  COUNT(DISTINCT f.id) as funcionarios,
  COUNT(DISTINCT t.id) as terminais,
  COUNT(DISTINCT p.id) as pontos
FROM empresas e
LEFT JOIN usuarios u ON u.empresa_id = e.id
LEFT JOIN funcionarios f ON f.empresa_id = e.id
LEFT JOIN terminais t ON t.empresa_id = e.id
LEFT JOIN pontos p ON p.empresa_id = e.id
GROUP BY e.nome;</code>
            <button onclick="copySQL(this)" class="btn btn-sm">Copiar</button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="/assets/js/config.js"></script>
  <script src="/assets/js/db.js"></script>
  <script src="/assets/js/auth.js"></script>
  <script src="/assets/js/superadmin-sistema.js"></script>
</body>
</html>
